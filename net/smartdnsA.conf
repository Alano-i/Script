# ======= 基础配置 =======
log-level info
log-file /etc/smartdns/log/smartdns.log
log-size 5M
log-num 5

# ======= 监听53端口 =======
bind [::]:53

# ======= 可选，参数tcp-idle-time控制TCP空闲断链时间 =======
tcp-idle-time 120

# ======= 缓存设置 =======
cache-size 0
cache-persist no
cache-checkpoint-time 0
speed-check-mode none

# ======= Bootstrap DNS =======
server 61.139.2.69 -bootstrap-dns    # 运营商DNS，需要修改
server 218.6.200.139 -bootstrap-dns  # 运营商DNS，需要修改

# ======= 配置上游服务器 =======
server 10.10.10.12  # mihomo的IP，需要修改

# ======= 国内 =======
server 10.10.10.9 -group domestic -exclude-default-group    # smartdns B 的IP，需要修改

# ======= 测速模式 =======
speed-check-mode ping,tcp:80,tcp:443

# ======= 自动扩展 address 对应的 PTR 记录 =======
expand-ptr-from-address no

# ======= 强制处理 QTYPE=SOA 请求 =======
#force-qtype-SOA -,12

# ======= 域名规则设置 =======
domain-set -name domestic_domainlist -file /etc/smartdns/domain-set/domestic_domainlist.conf

# ======= 国内域名规则 =======
domain-rules /domain-set:domestic_domainlist/ -nameserver domestic

# ======= 特殊域名规则:加入的域名强制不经过Mihomo(不代理)，直接走爱快出口， -no-cache 参数根据实际情况添加 =======
# ======= 也可添加自己的DDNS域名，走国内且DNS不缓存，提高效率 =======
# domain-rules /xxx.com/ -no-cache --no-serve-expired -nameserver domestic -response-mode fastest-ip
domain-rules /onestrm.cn/ --no-serve-expired -nameserver domestic -response-mode fastest-ip
domain-rules /xmoviebot.com/ --no-serve-expired -nameserver domestic -response-mode fastest-ip
